# æ—¥å¿—æŸ¥çœ‹å¿«é€ŸæŒ‡å— - 2025-11-18

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æŸ¥çœ‹æ—¥å¿—çš„3ç§æ–¹æ³•

#### æ–¹æ³•1ï¸âƒ£: Android Studio Logcat (æœ€å¿«)

```
1. æ‰“å¼€Android Studio
2. View â†’ Tool Windows â†’ Logcat
3. æœç´¢: SmsReader æˆ– SmsListScreen
4. æŸ¥çœ‹å®æ—¶æ—¥å¿—
```

**å…³é”®æ—¥å¿—æ ‡ç­¾**:
- `SmsReader` - çŸ­ä¿¡è¯»å–è¿‡ç¨‹
- `SmsListScreen` - çŸ­ä¿¡åˆ—è¡¨åŠ è½½
- `LogFileWriter` - æ—¥å¿—æ–‡ä»¶å†™å…¥

---

#### æ–¹æ³•2ï¸âƒ£: åº”ç”¨å†…æ—¥å¿—æŸ¥çœ‹å™¨ (æ¨è)

```
1. æ‰“å¼€åº”ç”¨
2. è¿›å…¥è®¾ç½®/è°ƒè¯•èœå•
3. ç‚¹å‡»"æ—¥å¿—æŸ¥çœ‹å™¨"
4. é€‰æ‹©æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹
5. ç‚¹å‡»"å¯¼å‡º"ä¿å­˜æ—¥å¿—
```

**ä¼˜ç‚¹**:
- âœ… æ— éœ€è¿æ¥ç”µè„‘
- âœ… å¯ä»¥å¯¼å‡ºæ—¥å¿—æ–‡ä»¶
- âœ… æ”¯æŒæœç´¢å’Œè¿‡æ»¤
- âœ… å½©è‰²æ˜¾ç¤ºä¸åŒçº§åˆ«çš„æ—¥å¿—

---

#### æ–¹æ³•3ï¸âƒ£: ADBå‘½ä»¤è¡Œ (é«˜çº§)

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
adb logcat | grep -E "SmsReader|SmsListScreen"

# å¯¼å‡ºæ—¥å¿—æ–‡ä»¶
adb pull /sdcard/Android/data/com.sms.tagger/files/sms_logs/ ./

# æŸ¥çœ‹æœ€æ–°çš„æ—¥å¿—æ–‡ä»¶
cat sms_logs/sms_agent_*.log | tail -50
```

---

## ğŸ“Š æ—¥å¿—ç¤ºä¾‹

### æˆåŠŸçš„æ—¥å¿—æµç¨‹

```
========== å¼€å§‹æƒé™æ£€æŸ¥ ==========
è¿è¡Œæ—¶æƒé™(READ_SMS): âœ… å·²æˆäºˆ
å°è¯•è®¿é—®SMSæä¾›è€…: content://sms
âœ… SMSæä¾›è€…è®¿é—®æˆåŠŸï¼Œå­˜åœ¨çŸ­ä¿¡æ•°æ®
========== æƒé™æ£€æŸ¥å®Œæˆ ==========

========== å¼€å§‹è¯»å–çŸ­ä¿¡ ==========
é™åˆ¶æ•°é‡: 5000
âœ… æƒé™æ£€æŸ¥é€šè¿‡
åˆ†é¡µä¿¡æ¯: æ€»é¡µæ•°=51, æ¯é¡µå¤§å°=100
è¯»å–ç¬¬ 1/51 é¡µ (offset=0, limit=100)
âœ… ç¬¬ 0 é¡µ: æˆåŠŸè·å–Cursor
ç¬¬ 0 é¡µ: åˆ—ç´¢å¼• - ADDRESS=1, BODY=2, DATE=3
ç¬¬ 0 é¡µç¬¬ 1 è¡Œ: å‘ä»¶äºº=ä¸­å›½ç§»åŠ¨, å†…å®¹=ã€ä¸­å›½ç§»åŠ¨ã€‘æ‚¨è·å¾—çš„500MBæµé‡åˆ¸..., æ—¶é—´æˆ³=1731868500000, è½¬æ¢å=2025-11-18T02:35:00
âœ… æˆåŠŸè¯»å– 5000 æ¡çŸ­ä¿¡
========== çŸ­ä¿¡è¯»å–å®Œæˆ ==========

========== å¼€å§‹åŠ è½½çŸ­ä¿¡åˆ—è¡¨ ==========
æ ‡ç­¾è¿‡æ»¤: null
âœ… è¯»å–åˆ° 5000 æ¡çŸ­ä¿¡
çŸ­ä¿¡ 1: å‘ä»¶äºº=ä¸­å›½ç§»åŠ¨, å†…å®¹=ã€ä¸­å›½ç§»åŠ¨ã€‘æ‚¨è·å¾—çš„500MBæµé‡åˆ¸..., æ—¶é—´=2025-11-18T02:35:00
è¿‡æ»¤åçŸ­ä¿¡æ•°: 5000 æ¡
æ’åºåçŸ­ä¿¡æ•°: 5000 æ¡
========== çŸ­ä¿¡åˆ—è¡¨åŠ è½½å®Œæˆ ==========
```

### å¤±è´¥çš„æ—¥å¿—ç¤ºä¾‹

```
âŒ æƒé™æ£€æŸ¥å¤±è´¥: æ²¡æœ‰çŸ­ä¿¡è¯»å–æƒé™
âŒ ç¬¬ 0 é¡µ: Cursorä¸ºnullï¼Œæ•°æ®åº“è®¿é—®å¤±è´¥
âŒ æ—¶é—´æˆ³è½¬æ¢å¤±è´¥: date=1731868500000, é”™è¯¯=...
```

---

## ğŸ” å¿«é€Ÿè¯Šæ–­

### çŸ­ä¿¡å®Œå…¨æ²¡æœ‰æ˜¾ç¤º

**æŸ¥çœ‹æ—¥å¿—**:
```
æœç´¢: "âœ… æˆåŠŸè¯»å–"
```

**ç»“æœ**:
- æ˜¾ç¤º `âœ… æˆåŠŸè¯»å– 0 æ¡çŸ­ä¿¡` â†’ ç³»ç»Ÿä¸­æ²¡æœ‰çŸ­ä¿¡
- æ˜¾ç¤º `âœ… æˆåŠŸè¯»å– 5000 æ¡çŸ­ä¿¡` â†’ çŸ­ä¿¡è¢«è¯»å–äº†ï¼Œç»§ç»­æ£€æŸ¥

---

### ä¸­å›½ç§»åŠ¨çŸ­ä¿¡æ²¡æœ‰æ˜¾ç¤º

**æŸ¥çœ‹æ—¥å¿—**:
```
æœç´¢: "ä¸­å›½ç§»åŠ¨"
```

**ç»“æœ**:
- æ‰¾åˆ° `å‘ä»¶äºº=ä¸­å›½ç§»åŠ¨` â†’ çŸ­ä¿¡è¢«è¯»å–äº†
- æ‰¾ä¸åˆ° â†’ çŸ­ä¿¡æœªè¢«è¯»å–æˆ–è¢«è¿‡æ»¤

---

### æ—¶é—´æˆ³è¯†åˆ«é”™è¯¯

**æŸ¥çœ‹æ—¥å¿—**:
```
æœç´¢: "æ—¶é—´æˆ³è½¬æ¢å¤±è´¥"
```

**ç»“æœ**:
- æ‰¾åˆ° `âŒ æ—¶é—´æˆ³è½¬æ¢å¤±è´¥` â†’ æ—¶é—´æˆ³æ ¼å¼æœ‰é—®é¢˜
- æ‰¾ä¸åˆ° â†’ æ—¶é—´æˆ³è½¬æ¢æˆåŠŸ

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

### åº”ç”¨å†…æ—¥å¿—æ–‡ä»¶

```
/sdcard/Android/data/com.sms.tagger/files/sms_logs/
```

**æ–‡ä»¶åæ ¼å¼**:
```
sms_agent_2025-11-18_14-30-45.log
```

### å¯¼å‡ºæ—¥å¿—

```bash
# ä½¿ç”¨ADBå¯¼å‡º
adb pull /sdcard/Android/data/com.sms.tagger/files/sms_logs/ ./

# æŸ¥çœ‹å¯¼å‡ºçš„æ–‡ä»¶
ls -lh sms_logs/
```

---

## ğŸ¯ è¯Šæ–­æµç¨‹å›¾

```
å¼€å§‹
  â†“
æŸ¥çœ‹æƒé™æ£€æŸ¥æ—¥å¿—
  â”œâ”€ âŒ æœªæˆäºˆ â†’ æˆäºˆæƒé™
  â””â”€ âœ… å·²æˆäºˆ â†’ ç»§ç»­
  â†“
æŸ¥çœ‹çŸ­ä¿¡è¯»å–æ—¥å¿—
  â”œâ”€ âŒ Cursorä¸ºnull â†’ æ•°æ®åº“è®¿é—®å¤±è´¥
  â”œâ”€ âœ… æˆåŠŸè¯»å– 0 æ¡ â†’ ç³»ç»Ÿä¸­æ²¡æœ‰çŸ­ä¿¡
  â””â”€ âœ… æˆåŠŸè¯»å– X æ¡ â†’ ç»§ç»­
  â†“
æŸ¥çœ‹çŸ­ä¿¡åˆ—è¡¨åŠ è½½æ—¥å¿—
  â”œâ”€ âŒ æ’åºåçŸ­ä¿¡æ•°: 0 æ¡ â†’ çŸ­ä¿¡è¢«è¿‡æ»¤
  â””â”€ âœ… æ’åºåçŸ­ä¿¡æ•°: X æ¡ â†’ çŸ­ä¿¡åº”è¯¥æ˜¾ç¤º
  â†“
æ£€æŸ¥UIæ˜¯å¦æ­£ç¡®æ˜¾ç¤º
  â”œâ”€ âŒ æ²¡æœ‰æ˜¾ç¤º â†’ UIé—®é¢˜
  â””â”€ âœ… æ­£å¸¸æ˜¾ç¤º â†’ å®Œæˆ
```

---

## ğŸ’¡ å¸¸è§é—®é¢˜é€ŸæŸ¥

| é—®é¢˜ | æ—¥å¿—å…³é”®è¯ | è§£å†³æ–¹æ¡ˆ |
|------|-----------|---------|
| æƒé™é—®é¢˜ | âŒ æœªæˆäºˆ | æˆäºˆREAD_SMSæƒé™ |
| æ•°æ®åº“è®¿é—®å¤±è´¥ | âŒ Cursorä¸ºnull | æ£€æŸ¥ç³»ç»ŸSMSåº”ç”¨ |
| çŸ­ä¿¡æœªè¯»å– | âœ… æˆåŠŸè¯»å– 0 æ¡ | æ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦æœ‰çŸ­ä¿¡ |
| æ—¶é—´æˆ³é”™è¯¯ | âŒ æ—¶é—´æˆ³è½¬æ¢å¤±è´¥ | æ£€æŸ¥æ—¶é—´æˆ³æ ¼å¼ |
| çŸ­ä¿¡è¢«è¿‡æ»¤ | æ’åºåçŸ­ä¿¡æ•°: 0 æ¡ | æ£€æŸ¥è¿‡æ»¤é€»è¾‘ |

---

## ğŸ“ è·å–å¸®åŠ©

### æ”¶é›†è¯Šæ–­ä¿¡æ¯

```bash
# 1. å¯¼å‡ºæ—¥å¿—æ–‡ä»¶
adb pull /sdcard/Android/data/com.sms.tagger/files/sms_logs/ ./

# 2. å¯¼å‡ºç³»ç»Ÿæ—¥å¿—
adb logcat > logcat.txt

# 3. å¯¼å‡ºåº”ç”¨ä¿¡æ¯
adb shell dumpsys package com.sms.tagger > app_info.txt

# 4. æ‰“åŒ…æ‰€æœ‰æ–‡ä»¶
zip -r sms_agent_diagnostics.zip sms_logs/ logcat.txt app_info.txt
```

### æäº¤é—®é¢˜æ—¶é™„å¸¦

1. æ—¥å¿—æ–‡ä»¶ (`sms_logs/`)
2. Logcatè¾“å‡º (`logcat.txt`)
3. åº”ç”¨ä¿¡æ¯ (`app_info.txt`)
4. é—®é¢˜æè¿°

