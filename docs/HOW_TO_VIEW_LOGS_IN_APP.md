# 如何在应用内查看日志

## 功能说明

应用已内置日志查看功能，无需使用 adb 或 Android Studio，可以直接在应用内查看和分享日志。

## 使用方法

### 步骤 1：打开日志查看页面

1. **打开应用**
2. **进入"短信列表"页面**
3. **点击右上角的"🐛"图标**（Bug Report 图标）
4. **进入"调试日志"页面**

### 步骤 2：查看日志

日志页面会显示：
- **日志文件位置**：显示日志文件保存的路径
- **日志内容**：实时显示最新的日志内容
- **日志级别颜色**：
  - 🔴 红色：ERROR（错误）
  - 🟠 橙色：WARN（警告）
  - 🟢 绿色：INFO（信息）
  - ⚪ 灰色：DEBUG（调试）

### 步骤 3：分享日志

1. **点击右上角的"分享"图标**（📤）
2. **选择分享方式**：
   - 微信、QQ、邮件等
   - 保存到文件
   - 复制到剪贴板

### 步骤 4：清空日志（可选）

如果需要清空所有日志：
1. **点击右上角的"删除"图标**（🗑️）
2. **确认清空**

## 日志文件位置

日志文件保存在：
```
/sdcard/Download/sms_agent_logs/
```

你可以：
1. 使用文件管理器访问
2. 通过 USB 连接电脑后访问
3. 在应用内直接分享

## 调试当前问题

### 查看短信读取日志

1. **打开应用**
2. **进入"短信列表"页面**（这会触发短信读取）
3. **点击"🐛"图标查看日志**
4. **在日志中搜索以下关键词**：
   - `菜鸟驿站` - 查看所有菜鸟驿站相关日志
   - `1-4-4011` - 查看目标短信日志
   - `目标短信` - 查看是否找到目标短信
   - `🔍` - 查看找到目标短信的标记
   - `⚠️` - 查看警告信息

### 关键日志标记

在日志中查找以下标记：

- **`🔍 找到目标短信！`** ✅
  - 表示成功读取到目标短信
  - 会显示短信的详细信息

- **`⚠️ 在读取的 X 条短信中未找到目标短信`** ❌
  - 表示未读取到目标短信
  - 会列出所有包含"菜鸟驿站"的短信

- **`包含'菜鸟驿站'的短信共 X 条`** 📊
  - 显示菜鸟驿站短信的数量
  - 会列出前几条菜鸟驿站短信的内容

- **`========== 开始读取短信 ==========`** 📥
  - 表示开始读取短信

- **`✅ 成功读取 X 条短信`** ✅
  - 表示读取完成

## 分享日志给开发者

如果需要我帮你分析问题，可以：

1. **打开日志查看页面**
2. **点击"分享"图标**
3. **选择分享方式**（建议通过微信或邮件）
4. **将日志内容发送给我**

或者：

1. **使用文件管理器**
2. **访问 `/sdcard/Download/sms_agent_logs/`**
3. **找到最新的日志文件**（文件名包含时间戳）
4. **通过 USB 或云盘分享文件**

## 日志内容示例

日志会包含以下信息：

```
[2025-11-21 15:30:45.123] [DEBUG] [SmsReader] ========== 开始读取短信 ==========
[2025-11-21 15:30:45.124] [DEBUG] [SmsReader] 限制数量: 20000
[2025-11-21 15:30:45.125] [DEBUG] [SmsReader] ✅ 权限检查通过
[2025-11-21 15:30:45.200] [DEBUG] [SmsReader] ✅ 成功读取 1234 条短信
[2025-11-21 15:30:45.201] [WARN] [SmsReader] 🔍 找到目标短信！第 1 页第 5 行: 发件人=10690000, 内容=【菜鸟驿站】您的包裹已到站，凭1-4-4011到..., 时间=2025-11-20T12:49:00
```

## 注意事项

1. **日志文件会自动清理**：最多保留 10 个日志文件，单个文件最大 5MB
2. **日志会实时更新**：每次操作应用都会记录日志
3. **隐私保护**：日志可能包含短信内容，分享时请注意隐私

## 常见问题

### Q: 日志页面是空的？

**A**: 
1. 确保已经操作过应用（如打开短信列表）
2. 日志会在操作时自动记录
3. 如果仍然为空，可能是权限问题

### Q: 如何查看历史日志？

**A**: 
1. 使用文件管理器访问 `/sdcard/Download/sms_agent_logs/`
2. 日志文件按时间命名，最新的在最前面

### Q: 日志文件太大？

**A**: 
1. 应用会自动清理旧日志
2. 可以手动清空日志（点击删除图标）

---

**提示**：如果遇到问题，请查看日志中的 `⚠️` 和 `❌` 标记，这些通常包含重要的错误信息。

