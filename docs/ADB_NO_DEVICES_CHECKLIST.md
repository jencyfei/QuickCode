# ADB未检测到设备 - 快速检查清单

## 当前状态

✅ ADB服务已启动  
❌ 未检测到设备（`List of devices attached` 后面为空）

---

## 快速检查清单（按顺序执行）

### ☑️ 检查1：USB连接

**问题：** USB线是否已连接？

**检查：**
- [ ] 手机通过USB线连接到电脑
- [ ] USB线支持数据传输（不是仅充电线）
- [ ] 尝试更换USB端口（建议使用USB 2.0端口）
- [ ] 尝试更换USB线

**下一步：** 如果USB线有问题，更换后再运行 `adb devices`

---

### ☑️ 检查2：USB连接模式

**问题：** 手机上选择的USB连接模式是什么？

**检查：**
1. 连接USB后，手机上是否弹出"USB连接方式"通知？
2. 如果弹出，请选择：
   - ✅ "文件传输" 或 "MTP模式"
   - ✅ "PTP模式"（也可以）
   - ❌ **不要选择** "仅充电"

**操作：**
- 下拉通知栏，点击"USB连接"或"USB用于"通知
- 选择"文件传输"或"MTP"

**下一步：** 选择正确模式后，等待几秒，再运行 `adb devices`

---

### ☑️ 检查3：开发者选项

**问题：** 是否已启用开发者选项？

**检查：**
- [ ] 已进入开发者选项（设置 → 开发者选项）
- [ ] 如果看不到"开发者选项"：
  1. 设置 → 关于手机
  2. 连续点击"版本号"7次
  3. 返回设置，查看"开发者选项"

**下一步：** 如果未启用，先启用开发者选项

---

### ☑️ 检查4：USB调试

**问题：** USB调试是否已启用？

**检查：**
- [ ] 设置 → 开发者选项 → "USB调试" 已启用
- [ ] 连接USB时，手机上是否弹出"允许USB调试吗？"对话框？

**操作：**
1. 如果弹出对话框：
   - ✅ **勾选"始终允许这台计算机"**
   - ✅ 点击"确定"
2. 如果没有弹出：
   - 进入开发者选项 → "撤销USB调试授权"
   - 拔掉USB线，重新连接
   - 应该会弹出授权对话框

**下一步：** 授权后，再运行 `adb devices`

---

### ☑️ 检查5：品牌特定设置

**问题：** 是否需要启用品牌特定的设置？

#### 小米手机
- [ ] 开发者选项 → 启用"仅充电模式下允许ADB调试"
- [ ] 开发者选项 → 关闭"MIUI优化"（可选）

#### 华为/荣耀手机
- [ ] 开发者选项 → 启用"USB调试（安全设置）"
- [ ] 设置 → 系统和更新 → 关闭"纯净模式"（如果有）

#### OPPO/OnePlus手机
- [ ] 开发者选项 → 启用"USB调试（安全设置）"

#### VIVO手机
- [ ] 开发者选项 → 启用"USB调试（安全设置）"
- [ ] 设置 → 关闭"纯净模式"（如果有）

**下一步：** 完成品牌特定设置后，重新连接USB，再运行 `adb devices`

---

### ☑️ 检查6：Windows设备管理器

**问题：** Windows是否识别到了Android设备？

**操作：**
1. 按 `Win + X`，选择"设备管理器"
2. 查看是否有：
   - "Android Phone"
   - "便携设备"
   - "其他设备"（带黄色感叹号）

**结果：**
- ✅ 看到"Android Phone"或"便携设备"（无感叹号） → 驱动正常
- ⚠️ 看到带黄色感叹号的设备 → 需要安装驱动
- ❌ 什么都没有 → USB连接有问题或驱动未安装

**如果看到黄色感叹号：**
- 根据手机品牌安装对应驱动
- 或使用手机厂商的助手软件自动安装驱动

**下一步：** 安装驱动后，重新连接USB，再运行 `adb devices`

---

### ☑️ 检查7：重启ADB服务

**问题：** ADB服务是否需要重启？

**操作：** 在PowerShell中运行：
```powershell
adb kill-server
adb start-server
adb devices
```

**下一步：** 查看是否检测到设备

---

### ☑️ 检查8：授权状态

**问题：** 设备是否显示为 `unauthorized`？

**检查：**
```powershell
adb devices
```

**结果：**
- 如果显示 `XXXXXXXX    device` → ✅ 连接成功！
- 如果显示 `XXXXXXXX    unauthorized` → ⚠️ 需要授权
- 如果显示空 → ❌ 设备未连接

**如果是 `unauthorized`：**
1. 在手机上：开发者选项 → "撤销USB调试授权"
2. 拔掉USB线，重新连接
3. 手机上弹出授权对话框，勾选"始终允许"，点击"确定"

**下一步：** 授权后，再运行 `adb devices`

---

## 测试命令

运行以下命令来测试连接：

```powershell
# 1. 检查ADB版本
adb version

# 2. 重启ADB服务
adb kill-server
adb start-server

# 3. 检查设备（基本）
adb devices

# 4. 检查设备（详细信息）
adb devices -l

# 5. 获取设备状态
adb get-state

# 6. 检查USB设备（Windows命令）
Get-PnpDevice | Where-Object {$_.FriendlyName -like "*Android*" -or $_.FriendlyName -like "*ADB*"}
```

---

## 常见问题

### Q1: 手机上没有弹出"允许USB调试"对话框

**解决方法：**
1. 进入开发者选项 → "撤销USB调试授权"
2. 拔掉USB线，重新连接
3. 应该会弹出授权对话框

### Q2: 设备管理器中看到带感叹号的设备

**解决方法：**
- 安装手机厂商的USB驱动
- 或使用手机厂商的助手软件（会自动安装驱动）

### Q3: USB连接后，手机上没有任何反应

**解决方法：**
1. 检查USB线是否支持数据传输
2. 尝试更换USB端口
3. 检查手机USB端口是否正常
4. 尝试在手机上手动选择USB连接模式

### Q4: 之前能连接，现在突然不能连接了

**解决方法：**
1. 重启ADB服务：`adb kill-server && adb start-server`
2. 撤销USB调试授权，重新授权
3. 检查USB线是否松动
4. 尝试重启手机和电脑

---

## 成功标志

当您运行 `adb devices` 时，如果看到：

```
List of devices attached
XXXXXXXX    device
```

其中 `XXXXXXXX` 是设备序列号，`device` 表示设备已连接并授权。

**恭喜！设备连接成功！** 🎉

现在您可以：
1. 查看Logcat日志
2. 安装/卸载应用
3. 调试应用

---

## 下一步

连接成功后，查看日志：

```powershell
# 清除旧日志
adb logcat -c

# 查看过滤后的日志
adb logcat | Select-String -Pattern "SmsReader|10684|9-5-5038|菜鸟驿站"
```

或使用Android Studio的Logcat窗口查看。

---

## 详细排查指南

如果以上步骤都无法解决，请查看：

📄 **docs/ADB_DEVICES_EMPTY_TROUBLESHOOTING.md**

包含更详细的故障排查步骤和所有品牌手机的特定设置。

