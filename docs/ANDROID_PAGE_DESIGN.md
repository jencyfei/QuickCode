# Android App 页面图设计文档

> **设计原则**：简约可爱风，页面图先行，用户评审通过后再开发  
> **配色方案**：粉色系 (#FF6B9D)，温暖友好  
> **开发方式**：Kotlin + Jetpack Compose，Gradle打包

---

## 📱 应用信息

- **应用名称**：短信标签助手
- **包名**：com.sms.tagger
- **最低Android版本**：Android 6.0 (API 23)
- **目标Android版本**：Android 14 (API 34)

---

## 🎨 设计风格

### 配色方案
- **主色**：`#FF6B9D` (粉红色)
- **次色**：`#FF8FAB` (浅粉色)
- **背景**：`#FFF5F5` (淡粉色背景)
- **卡片**：`#FFFFFF` (白色)
- **文字**：`#333333` (深灰)

### 设计元素
- ✅ 圆角设计（16dp-24dp）
- ✅ Emoji图标
- ✅ 轻柔阴影
- ✅ 流畅动画

---

## 📄 页面列表

1. **启动页** (Splash Screen)
2. **权限引导页** (Permission Guide)
3. **登录/注册页** (Login/Register)
4. **短信列表页** (SMS List) - 主页
5. **短信详情页** (SMS Detail)
6. **标签管理页** (Tag Management)
7. **设置页** (Settings)

---

## 页面 1: 启动页 (Splash Screen)

### 页面图
```
+--------------------------------------+
|                                      |
|                                      |
|                                      |
|                                      |
|              📱                      |
|                                      |
|        短信标签助手                   |
|                                      |
|     让短信管理变得简单有趣             |
|                                      |
|                                      |
|                                      |
|         加载中...                     |
|                                      |
|                                      |
+--------------------------------------+
```

### 功能说明
- 显示应用Logo（手机Emoji 📱）
- 显示应用名称和Slogan
- 加载动画（2秒）
- 自动跳转到下一页

### 跳转逻辑
- 首次启动 → 权限引导页
- 已授权但未登录 → 登录页
- 已登录 → 短信列表页

---

## 页面 2: 权限引导页 (Permission Guide)

### 页面图
```
+--------------------------------------+
|  [跳过]                              |
|                                      |
|              📨                      |
|                                      |
|      需要读取短信权限                 |
|                                      |
|  为了自动管理您的短信，我们需要：      |
|                                      |
|  ✓ 读取短信内容                      |
|  ✓ 接收新短信通知                    |
|                                      |
|  我们承诺：                           |
|  • 不会发送短信                      |
|  • 不会分享您的数据                  |
|  • 所有数据加密存储                  |
|                                      |
|                                      |
|     [授予权限 ✨]                    |
|                                      |
+--------------------------------------+
```

### 功能说明
- 说明需要的权限
- 隐私承诺
- 授予权限按钮
- 右上角"跳过"按钮（跳过后功能受限）

### 权限列表
```xml
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.INTERNET" />
```

---

## 页面 3: 登录/注册页 (Login/Register)

### 页面图 - 登录
```
+--------------------------------------+
|                                      |
|    ○  ○  ○                          |
|                                      |
|              📱                      |
|        短信标签助手                   |
|     让短信管理变得简单有趣             |
|                                      |
|  +--------------------------------+  |
|  | 👤  邮箱或手机号                |  |
|  +--------------------------------+  |
|                                      |
|  +--------------------------------+  |
|  | 🔒  密码                        |  |
|  +--------------------------------+  |
|                                      |
|     [登录 ✨]                        |
|                                      |
|     [注册账号 🎉]                    |
|                                      |
|  💡 首次使用？自动读取本地短信        |
+--------------------------------------+
```

### 页面图 - 注册
```
+--------------------------------------+
|  [<]  注册账号                       |
|                                      |
|              🎉                      |
|                                      |
|  +--------------------------------+  |
|  | 📧  邮箱                        |  |
|  +--------------------------------+  |
|                                      |
|  +--------------------------------+  |
|  | 📱  手机号                      |  |
|  +--------------------------------+  |
|                                      |
|  +--------------------------------+  |
|  | 🔒  密码（6位以上）             |  |
|  +--------------------------------+  |
|                                      |
|  +--------------------------------+  |
|  | 🔒  确认密码                    |  |
|  +--------------------------------+  |
|                                      |
|     [立即注册 ✨]                    |
|                                      |
|  已有账号？[去登录]                   |
+--------------------------------------+
```

### 功能说明
- 支持邮箱或手机号登录
- 密码显示/隐藏切换
- 表单验证
- 注册/登录切换
- 登录成功后自动同步短信

---

## 页面 4: 短信列表页 (SMS List) - 主页 ⭐

### 页面图
```
+--------------------------------------+
|  [☰]  📱 我的短信        [🔍] [⚙️]  |
|--------------------------------------|
|  [全部▼] [时间▼] [标签▼]            |
|--------------------------------------|
|                                      |
|  ┌────────────────────────────────┐ |
|  │ □  95533              10:30 AM │ |
|  │    【验证码】您的验证码是123456  │ |
|  │    [验证码] [银行]              │ |
|  └────────────────────────────────┘ |
|                                      |
|  ┌────────────────────────────────┐ |
|  │ □  菜鸟驿站            昨天     │ |
|  │    您的快递已到达小区门口...     │ |
|  │    [快递]                       │ |
|  └────────────────────────────────┘ |
|                                      |
|  ┌────────────────────────────────┐ |
|  │ □  招商银行            11/02    │ |
|  │    您尾号8888的储蓄卡消费...    │ |
|  │    [银行] [消费]                │ |
|  └────────────────────────────────┘ |
|                                      |
|  ... (滚动加载更多) ...             |
|                                      |
|--------------------------------------|
|  [已选 2条]  [🏷️标签] [📋复制] [🗑️] |
+--------------------------------------+
```

### 功能说明

#### 顶部导航栏
- **左侧**：菜单按钮 [☰]
- **中间**：标题 "📱 我的短信"
- **右侧**：搜索 [🔍] 和设置 [⚙️]

#### 筛选栏
- **全部**：全部/未读/已读/重要
- **时间**：今天/昨天/本周/本月/自定义
- **标签**：显示所有标签，可多选

#### 短信卡片
- **复选框**：长按或点击进入多选模式
- **发件人**：显示号码或名称
- **时间**：智能显示（今天显示时间，昨天显示"昨天"，更早显示日期）
- **内容预览**：最多2行
- **标签**：彩色标签，最多显示3个
- **点击**：进入短信详情页

#### 底部操作栏（多选模式）
- 显示已选数量
- **打标签** [🏷️]：批量添加标签
- **复制** [📋]：复制到剪贴板
- **删除** [🗑️]：批量删除（需确认）

#### 交互
- **下拉刷新**：同步新短信
- **上拉加载**：加载更多
- **左滑**：快捷操作（标签/删除）
- **长按**：进入多选模式

---

## 页面 5: 短信详情页 (SMS Detail)

### 页面图
```
+--------------------------------------+
|  [<]  短信详情              [⋮]     |
|--------------------------------------|
|                                      |
|  发件人                              |
|  95533                               |
|  中国建设银行                         |
|                                      |
|  时间                                |
|  2025-11-04 10:30:25                |
|                                      |
|  标签                                |
|  [验证码] [银行] [+ 添加标签]        |
|                                      |
|  内容                                |
|  ┌────────────────────────────────┐ |
|  │                                │ |
|  │  【验证码】尊敬的客户，您的验证  │ |
|  │  码是123456，5分钟内有效。请勿  │ |
|  │  泄露给他人。如非本人操作，请忽  │ |
|  │  略此短信。                      │ |
|  │                                │ |
|  │  【中国建设银行】                │ |
|  │                                │ |
|  └────────────────────────────────┘ |
|                                      |
|  [📋 复制内容]  [🗑️ 删除短信]        |
|                                      |
+--------------------------------------+
```

### 功能说明
- 显示完整短信内容
- 发件人信息（号码+名称）
- 时间戳
- 标签列表（可添加/删除）
- 复制内容按钮
- 删除短信按钮
- 右上角菜单：分享/标记重要/举报垃圾

---

## 页面 6: 标签管理页 (Tag Management)

### 页面图
```
+--------------------------------------+
|  [<]  🏷️ 标签管理         [+ 新建]  |
|--------------------------------------|
|                                      |
|  我的标签 (8个)                      |
|                                      |
|  ┌────────────────────────────────┐ |
|  │  [验证码] 🔴                    │ |
|  │  15条短信                       │ |
|  │                        [编辑]   │ |
|  └────────────────────────────────┘ |
|                                      |
|  ┌────────────────────────────────┐ |
|  │  [快递] 🟠                      │ |
|  │  8条短信                        │ |
|  │                        [编辑]   │ |
|  └────────────────────────────────┘ |
|                                      |
|  ┌────────────────────────────────┐ |
|  │  [银行] 🟡                      │ |
|  │  12条短信                       │ |
|  │                        [编辑]   │ |
|  └────────────────────────────────┘ |
|                                      |
|  ┌────────────────────────────────┐ |
|  │  [工作] 🟢                      │ |
|  │  5条短信                        │ |
|  │                        [编辑]   │ |
|  └────────────────────────────────┘ |
|                                      |
+--------------------------------------+
```

### 新建/编辑标签弹窗
```
+--------------------------------------+
|  新建标签                            |
|--------------------------------------|
|                                      |
|  标签名称                            |
|  +--------------------------------+  |
|  | 请输入标签名称                  |  |
|  +--------------------------------+  |
|                                      |
|  标签颜色                            |
|  🔴 🟠 🟡 🟢 🔵 🟣 🟤 ⚫          |
|                                      |
|  自动规则（可选）                     |
|  +--------------------------------+  |
|  | 包含关键词：验证码              |  |
|  +--------------------------------+  |
|                                      |
|     [取消]        [保存 ✨]         |
|                                      |
+--------------------------------------+
```

### 功能说明
- 显示所有标签
- 每个标签显示：名称、颜色、短信数量
- 点击标签：查看该标签的所有短信
- 编辑标签：修改名称、颜色、规则
- 删除标签：需确认（不删除短信）
- 新建标签：设置名称、颜色、自动规则

---

## 页面 7: 设置页 (Settings)

### 页面图
```
+--------------------------------------+
|  [<]  ⚙️ 设置                       |
|--------------------------------------|
|                                      |
|  账号                                |
|  ┌────────────────────────────────┐ |
|  │  👤 个人信息                    │ |
|  │  test@example.com       [>]    │ |
|  └────────────────────────────────┘ |
|                                      |
|  同步设置                            |
|  ┌────────────────────────────────┐ |
|  │  🔄 自动同步短信         [ON]  │ |
|  └────────────────────────────────┘ |
|  ┌────────────────────────────────┐ |
|  │  📱 仅WiFi同步          [OFF]  │ |
|  └────────────────────────────────┘ |
|  ┌────────────────────────────────┐ |
|  │  🕐 同步频率            [实时]  │ |
|  └────────────────────────────────┘ |
|                                      |
|  通知设置                            |
|  ┌────────────────────────────────┐ |
|  │  🔔 新短信通知           [ON]  │ |
|  └────────────────────────────────┘ |
|                                      |
|  数据管理                            |
|  ┌────────────────────────────────┐ |
|  │  📤 导出数据                    │ |
|  └────────────────────────────────┘ |
|  ┌────────────────────────────────┐ |
|  │  🗑️ 清空本地缓存                │ |
|  └────────────────────────────────┘ |
|                                      |
|  关于                                |
|  ┌────────────────────────────────┐ |
|  │  ℹ️ 关于应用          v1.0.0   │ |
|  └────────────────────────────────┘ |
|                                      |
|     [退出登录]                       |
|                                      |
+--------------------------------------+
```

### 功能说明
- **个人信息**：查看/编辑账号信息
- **自动同步**：开关自动同步功能
- **仅WiFi同步**：节省流量
- **同步频率**：实时/每小时/每天
- **新短信通知**：是否显示通知
- **导出数据**：导出为TXT/CSV
- **清空缓存**：清空本地短信缓存
- **关于应用**：版本号、隐私政策、用户协议
- **退出登录**：清除本地数据

---

## 🎨 组件设计

### 短信卡片组件
```kotlin
@Composable
fun SmsCard(
    sender: String,
    content: String,
    time: String,
    tags: List<Tag>,
    isSelected: Boolean,
    onClick: () -> Unit,
    onLongClick: () -> Unit
)
```

### 标签组件
```kotlin
@Composable
fun TagChip(
    name: String,
    color: Color,
    onDelete: (() -> Unit)? = null
)
```

### 空状态组件
```kotlin
@Composable
fun EmptyState(
    icon: String,
    title: String,
    description: String,
    actionText: String? = null,
    onAction: (() -> Unit)? = null
)
```

---

## 🔄 数据同步流程

### 首次同步
```
启动App → 请求权限 → 读取所有短信 → 
上传到服务器 → 显示同步进度 → 完成
```

### 实时同步
```
收到新短信 → 后台服务监听 → 
上传到服务器 → 更新本地数据库 → 
刷新列表
```

### 同步策略
- **首次同步**：读取所有历史短信
- **增量同步**：只同步新短信
- **冲突处理**：服务器时间戳优先
- **离线支持**：本地缓存，联网后同步

---

## 📦 技术栈

### Android端
- **语言**：Kotlin
- **UI框架**：Jetpack Compose
- **架构**：MVVM + Repository
- **数据库**：Room
- **网络**：Retrofit + OkHttp
- **依赖注入**：Hilt
- **异步**：Coroutines + Flow

### 构建工具
- **Gradle**: 8.0+
- **AGP**: 8.1+
- **Kotlin**: 1.9+

---

## 📱 权限说明

### 必需权限
```xml
<!-- 读取短信 -->
<uses-permission android:name="android.permission.READ_SMS" />

<!-- 接收短信 -->
<uses-permission android:name="android.permission.RECEIVE_SMS" />

<!-- 网络访问 -->
<uses-permission android:name="android.permission.INTERNET" />
```

### 可选权限
```xml
<!-- 联系人（用于显示发件人名称） -->
<uses-permission android:name="android.permission.READ_CONTACTS" />

<!-- 通知 -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
```

---

## 🎯 开发优先级

### Phase 1: 核心功能（2周）
1. ✅ 项目初始化（Gradle配置）
2. ✅ 读取短信权限
3. ✅ 短信列表页
4. ✅ 短信详情页
5. ✅ 登录/注册
6. ✅ 数据同步

### Phase 2: 标签功能（1周）
1. ✅ 标签管理页
2. ✅ 打标签功能
3. ✅ 标签筛选

### Phase 3: 优化完善（1周）
1. ✅ 设置页
2. ✅ 数据导出
3. ✅ 性能优化
4. ✅ UI打磨

---

## ✅ 待评审内容

请您审核以下内容：

### 1. 页面布局
- [ ] 启动页设计是否合适？
- [ ] 权限引导页说明是否清晰？
- [ ] 登录/注册页布局是否友好？
- [ ] 短信列表页信息是否完整？
- [ ] 短信详情页功能是否齐全？
- [ ] 标签管理页操作是否便捷？
- [ ] 设置页选项是否合理？

### 2. 交互设计
- [ ] 多选模式的触发方式（长按）是否合理？
- [ ] 左滑快捷操作是否需要？
- [ ] 底部操作栏的按钮是否足够？
- [ ] 筛选功能是否满足需求？

### 3. 视觉风格
- [ ] 简约可爱风格是否符合预期？
- [ ] 粉色系配色是否喜欢？
- [ ] Emoji图标是否合适？
- [ ] 圆角和阴影是否协调？

### 4. 功能完整性
- [ ] 是否缺少重要功能？
- [ ] 是否有不需要的功能？
- [ ] 同步策略是否合理？
- [ ] 权限请求是否合理？

---

## 📝 修改意见

请在此处提出您的修改意见：

```
（请在这里写下您的意见和建议）

例如：
1. 短信列表页的卡片太大了，建议缩小
2. 标签颜色选择器希望有更多颜色
3. 设置页希望增加"暗黑模式"选项
...
```

---

**设计师**: Cascade AI  
**创建时间**: 2025-11-04  
**版本**: v1.0  
**状态**: 待评审 ⏳
